<!DOCTYPE html>
<html lang="en">

<head>
  <title>&lt;model-viewer&gt; example</title>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <link rel="stylesheet" href="copy.css" type="text/css">

  <script src="https://unpkg.com/focus-visible@5.0.2/dist/focus-visible.js" defer></script>

</head>

<body>
  <div id="card">
    
    <model-viewer 
    id="hotspot-demo" 
    src="Anim_lenovo_Final.glb" 
    ios-src="Prueba_011.usdz" 
    poster="PC_lenovo.png"
    alt="A 3D model of an astronaut" 
    shadow-intensity="1" 
    camera-controls 
    autoplay animation-name="ActionB_Idle_Close"  
    ar
    ar-mode="webxr" 
    ar-scale="fixed"
    camera-orbit="-30deg 70deg 2m">
      <button class="hotspot" slot="hotspot-power" data-position="-0.145 0 -0.04" data-normal="0 0 1">
        <div id="annotation">Puerto de Carga</div>
      </button>
      <button class="hotspot" slot="hotspot-buttonpower" data-position="0.145 0 -0.02" data-normal="0 0 1">
        <div id="annotation">Tunderbolt y Boton Encendido</div>
      </button>
      <div id="controls" class="dim">
        <label for="animationName">Abrir/Cerrar</label>
        <!--<select id="selectanim">
          <option disabled selected value> -- seleccionar -- </option>
          <option value="Open_Screen">Abrir</option>
          <option value="Close_Screen.001">Cerrar</option>

        </select>-->
        <br><br>
        <label id="switch_label" class="switch">
          <input id="chequeando" type="checkbox" name="checkbox">
          <span class="slider round"></span>
        </label>

      </div>

    </model-viewer>


  </div>


  <footer>
    <span>Modelo Lenovo</span>


  </footer>
  <script>

    const modelViewer = document.querySelector('#hotspot-demo');
    const ocultarlabel = document.getElementById("switch_label");
    /*
    modelViewer.querySelector('#selectanim').addEventListener('input', (event) => {
      modelViewer.animationName = event.target.value;

      self.setInterval(() => {
          modelViewer.animationName = modelViewer.animationName === 'idle' ?
              'Rotate' : 'idle';
      }, 1500.0);
      if (event.target.value == "Open_Screen") {

        setTimeout(() => {
          console.log("1 Segundo esperado")
          modelViewer.animationName = "Idle_Open_Screen";
        }, 1000);

      } else if (event.target.value == "Close_Screen.001") {

        setTimeout(() => {
          console.log("20 Segundos esperado")
          modelViewer.animationName = "Idle_Close";
        }, 20000);

      }



    })*/
    
    var checkbox = modelViewer.querySelector("input[name=checkbox]");

    checkbox.addEventListener('change', function () {
      if (this.checked) {
        console.log("Checkbox is checked..");

        setTimeout(() => {
          console.log("idle open screen ");

          modelViewer.animationName= "ActionB_Idle_Open_Screen";
          
          ocultarlabel.style.visibility = "visible";
        }, 16500);

        console.log("open screen anima");
        modelViewer.animationName = "ActionB_Open_Screen";

        ocultarlabel.style.visibility = "hidden";
        

      } else {
        console.log("Checkbox is not checked..");

        setTimeout(() => {
          console.log("17 Segundos esperado");
          console.log("idle open screen ");
          modelViewer.animationName = "ActionB_Idle_Close";
          ocultarlabel.style.visibility = "visible";
         
        }, 17000);

        console.log("close screen anima");
        modelViewer.animationName = "ActionB_Close_Screen";

        ocultarlabel.style.visibility = "hidden";
       
        
      }
    });


   /* var select = document.getElementById('selectanim');
    select.addEventListener('change',
      function () {
        var selectedOption = this.options[select.selectedIndex];
        console.log(selectedOption.value + ': ' + selectedOption.text);
      });*/

  </script>


  <!-- 💁 Include both scripts below to support all browsers! -->

  <!-- Loads <model-viewer> for modern browsers: -->
  <script type="module" src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js">
  </script>
</body>

</html>